$dark-background: darken($dark-color, 5%);
$dark-text: darken($light-color, 5%);
$dark-secondary: mix($dark-color, $primary-color, 90%);
$dark-shadow: darken($dark-background, 10%);
$dark-border: darken($border-color, 10%);
$dark-overlay: rgba($dark-background, 0.69);
$dark-code: mix($dark-color, $code-color, 90%);
$dark-highlight: darken($highlight-color, 50%);

@include bg-color-variant(".bg-darked", $dark-background);
@include bg-color-variant(".bg-secondary-darked", $dark-secondary);

@include text-color-variant(".text-darked", $dark-text);

@media (prefers-color-scheme: dark) {
    :root {
        color-scheme: dark;
    }
    .form-input,
    .form-select {
        background-color: $dark-background !important;
        border-color: $gray-color-dark !important;
        color: $dark-text !important;
    }
    .form-checkbox,
    .form-radio,
    .form-switch {
        .form-icon {
            border-color: $gray-color-dark !important;
            background: $dark-background !important;
        }
    }
    // .form-switch {
    //     .form-icon::before {
    //         background: $gray-color-dark !important;
    //     }
    // }
    input {
        &:active + .form-icon {
            background: $dark-secondary !important;
        }
        &:checked + .form-icon {
            background: $primary-color !important;
        }
    }
    .badge {
        &[data-badge],
        &:not([data-badge]) {
            &::after {
                box-shadow: 0 0 0 0.1rem $dark-background !important;
                color: $dark-text !important;
            }
        }
    }
    code {
        @include label-variant($dark-code, lighten($dark-code, 42.5%));
    }
    .code {
        color: $gray-color;
        &::before {
            color: $gray-color;
        }
        code {
            background: $dark-color;
        }
    }
}

[color-scheme="dark"] {
    :root {
        color-scheme: dark;
    }
    .form-input,
    .form-checkbox .form-icon,
    .form-select {
        background-color: $dark-background !important;
        border-color: $gray-color-dark !important;
        color: $dark-text !important;
    }
}
